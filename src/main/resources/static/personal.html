<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en" >
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Личный кабинет</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>
<body onload="init()">
<header>
  <nav class="navbar">
    <div class="menu-center">
      <a href="toVacancies">вакансии</a>
      <a href="toNews">новости</a>
      <a href="\home">личный кабинет</a>
    </div>
    <div class="menu-right">
      <a href="\logout">выйти</a>
    </div>
    <div class="menu-toggle">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </nav>
  <div class="mobile-menu">
    <a href="#" class="user-icon">
      <img src="images/usericon.png" alt="User Icon" style="width: 60px;">
    </a>
    <a href="#" style="margin-top: 50px;">вакансии</a>
    <a href="#">новости</a>
    <a href="#">чаты</a>
    <a href="#">стажировки</a>
  </div>
</header>
<div style="width: 35%; height: 3px; background: #007bff; border-radius: 50px;"></div>
<div class="wrapper">
  <div class="container" style="border-radius: 24px; border: 1px solid black; margin-top: 50px;">
    <h2>Личный кабинет</h2>
    <div class="user-info">
      <p>Имя пользователя: <strong th:text="${user.name}"></strong></p>
      <p>Почта: <strong th:text="${user.email}"></strong></p>
      <p>Телефон: <strong th:text="${user.phone}"></strong></p>
    </div>
    <div class="form-group">
      <label for="about">Информация о себе:</label>
      <textarea id="about" rows="4" placeholder="Расскажите о себе..." ></textarea>
      <button onclick="saveAbout()">Сохранить</button>
    </div>
    <button onclick="findJob()" id="findButton">Найти работу</button>
  </div>
  <div class="containers">
    <div class="container">
      <h2>Разместить новость</h2>
      <div class="form-group">
        <label for="news-title">Название:</label>
        <input type="text" id="news-title" placeholder="Введите название...">
      </div>
      <div class="form-group">
        <label for="news-short-desc">Краткое описание:</label>
        <input type="text" id="news-short-desc" placeholder="Введите краткое описание...">
      </div>
      <div class="form-group">
        <label for="news-long-desc">Подробное описание:</label>
        <textarea id="news-long-desc" rows="4" placeholder="Введите подробное описание..."></textarea>
      </div>
      <div class="form-group">
        <label for="news-images">Изображения:</label>
        <input type="file" id="news-images" multiple>
      </div>
      <button onclick="submitNews()">Разместить новость</button>
    </div>

    <div class="container">
      <h2>Разместить вакансию</h2>
      <div class="form-group">
        <label for="job-title">Название:</label>
        <input type="text" id="job-title" placeholder="Введите название...">
      </div>
      <div class="form-group">
        <label for="job-short-desc">Краткое описание:</label>
        <input type="text" id="job-short-desc" placeholder="Введите краткое описание...">
      </div>
      <div class="form-group">
        <label for="job-long-desc">Подробное описание:</label>
        <textarea id="job-long-desc" rows="4" placeholder="Введите подробное описание..."></textarea>
      </div>
      <div class="form-group">
        <label for="job-images">Изображения:</label>
        <input type="file" id="job-images" multiple>
      </div>
      <button onclick="submitJob()">Разместить вакансию</button>
    </div>



    <div class="container">
      <h2>Разместить резюме</h2>
      <div class="form-group">
        <label for="year">Возраст:</label>
        <input type="text" id="year" placeholder="Введите ваш возраст...">
      </div>
    <div class="form-group">
      <label for="desc">О себе:</label>
      <textarea id="desc" rows="4" placeholder="Напиши о себе..."></textarea>
    </div>
      <div class="form-group">
        <label for="study">Образование</label>
        <textarea id="study" rows="4" placeholder="Напиши ваше образование и где учились..."></textarea>
      </div>
      <div class="form-group">
        <label for="location">Место проживания:</label>
        <input type="text" id="location" placeholder="Введите место проживания...">
      </div>
      <div class="form-group">
        <label for="country">Гражданство:</label>
        <textarea id="country" rows="4" placeholder="Введите ваше гражданство..."></textarea>
      </div>
      <div class="form-group">
        <label for="move">Готовность к переезду:</label>
        <select id="move" name="move" required>
          <option value="yes">Да</option>
          <option value="no">Нет</option>
        </select>
      </div>
      <div class="form-group">
        <label for="businessTrip">Готовность к переезду:</label>
        <select id="businessTrip" name="businessTrip" required>
          <option value="yes">Да</option>
          <option value="no">Нет</option>
        </select>
      </div>
      <div class="form-group">
        <label for="sheduel">Занятость:</label>
        <select id="sheduel" name="sheduel" required>
          <option value="fullDay">Полная занятость</option>
          <option value="notFullDay">Частичная занятость</option>
          <option value="choose">Гибкий график</option>
        </select>
      </div>
      <div class="form-group">
        <label for="job-long-desc">Опыт работы:</label>
        <textarea id="cv-long-desc" rows="4" placeholder="Детально опишите ваш опыт работы..."></textarea>
      </div>
      <div class="form-group">
        <label for="skills">Навыки</label>
        <textarea id="skills" rows="4" placeholder="Детально опишите ваши навыки (языки программирование, черты характера)..."></textarea>
      </div>
      <button onclick="submitCv()">Разместить резюме</button>
    </div>
  </div>
</div>
<footer style="height: 80px;background: #007bff; border-radius: 24px;margin-top: 50px; display: flex; align-items: center; justify-content: center;">
  <h2 style="color: #ffffff;">Skill Share</h2>
</footer>
<script>
  function init() {
    document.getElementById('about').value = "[[${info.description}]]"
  }
  function submitCv() {
    var move = $('#move').val() == "yes";
    var businessTrip = $('#businessTrip').val() == "yes";
    var cv = {
      age : $('#year').val(),
      description :$('#desc').val(),
      education: $('#study').val(),
      location : $('#location').val(),
      country : $('#country').val(),
      move : move,
      businessTrip : businessTrip,
      sheduel : $('#sheduel').val(),
      prevJob : $('#cv-long-desc').val(),
      skills : $('#skills').val()
    }
    $.ajax({
      type: "POST",
      url: "/home/createCV",
      contentType: "application/json",
      data: JSON.stringify(cv),
      success: function(response) {
        window.location.href = '/home';
      },
      error: function(err) {
        console.error(err);
      }
    });
  }
  function saveAbout() {
    $.ajax({
      type: "POST",
      url: "/home/addDescription",
      contentType: "application/json",
      data: JSON.stringify($('about').val()),
      success: function(response) {
        window.location.href = '/home';
      },
      error: function(err) {
        console.error(err);
      }
    });
  }
  
  function saveStack() {
    $.ajax({
      type: "POST",
      url: "/home/addStack",
      contentType: "application/json",
      data: JSON.stringify($('#stack').val()),
      success: function(response) {
        window.location.href = '/home';
      },
      error: function(err) {
        console.error(err);
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.querySelector('.menu-toggle');
    const mobileMenu = document.querySelector('.mobile-menu');

    menuToggle.addEventListener('click', function() {
      menuToggle.classList.toggle('active');
      mobileMenu.classList.toggle('active');
    });
  });
</script>
<style>
  html, body {
    margin: 0;
    padding: 0;
    font-family: "Montserrat", sans-serif;
}

.formWrapper {
    width: 100%;
    height: calc(100vh - 200px);
    display: flex;
    align-items: center;
    justify-content: center;
}

a, header {color: black}

.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    color: black;
}

.menu-center {
    display: flex;
    gap: 20px;
}

.menu-center a,
.menu-right a, .menu-toggle a, .mobile-menu a{
    color: #000000;
    text-decoration: none;
    font-size: 18px;
}

.menu-right .user-icon img {
    width: 24px;
    height: 24px;
}
.user-icon {
    display: flex;align-items: center;gap: 10px;
}

.menu-toggle {
    display: none;
    flex-direction: column;
    gap: 5px;
    cursor: pointer;
    position: relative;
    width: 25px;
    height: 18px;
}

.menu-toggle span {
    display: block;
    width: 100%;
    height: 3px;
    background-color: #000000;
    transition: all 0.3s ease-in-out;
}

.menu-toggle.active span:nth-child(1) {
    transform: translateY(7.5px) rotate(45deg);
}

.menu-toggle.active span:nth-child(2) {
    opacity: 0;
}

.menu-toggle.active span:nth-child(3) {
    transform: translateY(-7.5px) rotate(-45deg);
}

.mobile-menu {
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 10px;
    padding: 10px;
}

@media (max-width: 960px) {
    .menu-center,
    .menu-right {
        display: none;
    }
    .menu-toggle {
        display: flex;
    }
}

@media (max-width: 960px) {
    .mobile-menu.active {
        display: flex;
    }
}

body {
    font-family: "Montserrat", sans-serif;
    margin: 0;
    padding: 0;
    height: 100vh;
}
.container {
    background-color: #fff;
    padding: 20px;
    border-radius: 10px;
    width: 400px;
}
h2 {
    text-align: center;
    color: #333;
    margin-bottom: 50px;
}
.user-info {
    margin-bottom: 20px;
}
.user-info p {
    margin: 5px 0;
    color: #555;
}
.form-group {
    margin-bottom: 15px;
}
label {
    display: block;
    margin-bottom: 5px;
    color: #333;
}
input[type="text"], input[type="email"], input[type="tel"], input[type="number"], textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
    box-sizing: border-box;
}
button {
    color: white;
    padding: 10px 15px;
    border-radius: 5px;
    cursor: pointer;
    background-color: #007bff;
    color: #fff;
    border: none;
    cursor: pointer;
}

button:hover {
    background-color: #0056b3;
}

.wrapper {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 50px;
}

.containers {
    display: flex;
    justify-content: space-between;
    gap: 50px;
}

@media (max-width: 1000px) {
    .containers {display: flex; flex-direction: column;}
}

#findButton {
    color: black; background: white; border: 1px solid black; margin-top: 20px;
    transition: scale 0.3s ease;
}
#findButton:hover {
    scale: 1.03;
}
</style>
</body>
</html>